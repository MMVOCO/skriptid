#!/bin/bash

# Funktsioon kontrollimiseks, установлен ли apache2
check_apache_installed() {
    dpkg-query -W -f='${Status}' apache2 2>/dev/null | grep -c "ok installed"
}

# Kontroll, установлен ли apache2
if [ $(check_apache_installed) -eq 1 ]; then
    echo "Apache2 on juba paigaldatud."
    echo "Teenuse staatus:"
    systemctl status apache2
else
    echo "Apache2 ei ole paigaldatud. Paigaldan..."
    sudo apt update
    sudo apt install -y apache2
    echo "Apache2 paigaldus on lõpetatud."
    echo "Käivitan teenuse..."
    sudo systemctl start apache2
    sudo systemctl enable apache2
    echo "Teenuse staatus:"
    systemctl status apache2
fi